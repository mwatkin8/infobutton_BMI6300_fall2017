<html xmlns:xs="http://www.w3.org/2001/XMLSchema">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <title>OpenInfobutton</title>
  <link rel="shortcut icon" type="image/x-icon" href="http://lite.bmi.utah.edu/images/infobutton_icon.png">
  <link href="css/sp.css" rel="stylesheet" type="text/css">
  <script src="js/script.js" type="text/javascript"></script><script type="text/javascript">
  var arrConcept = [];
  arrConcept.push(['PROBLISTREV', '', 'Problem list review', '']);
  arrConcept.push(['MLREV', '', 'Medication list review', '']);
  arrConcept.push(['LABRREV', '', 'Laboratory results review', '']);
  arrConcept.push(['446.4', '2.16.840.1.113883.6.103', 'Wegeners Granulomatosis', '']);
  arrConcept.push(['44054006', '2.16.840.1.113883.6.96', 'Diabetes mellitus type 2', '']);
  arrConcept.push(['84114007', '2.16.840.1.113883.6.96', 'Heart Failure', '']);
  arrConcept.push(['595.9', '2.16.840.1.113883.6.103', 'Cystitis', '']);
  arrConcept.push(['235595009', '2.16.840.1.113883.6.96', 'Gastroesophageal reflux', '']);
  arrConcept.push(['237.7', '2.16.840.1.113883.6.103', 'Neurofibromatosis', '']);
  arrConcept.push(['37796009', '2.16.840.1.113883.6.96', 'Migraine headache', '']);
  arrConcept.push(['47505003', '2.16.840.1.113883.6.96', 'Post traumatic stress disorder', '']);
  arrConcept.push(['372.00', '2.16.840.1.113883.6.103', 'Acute Conjunctivitis', '']);
  arrConcept.push(['301542', '2.16.840.1.113883.6.88', 'Rosuvastatin', 'Rosuvastatin (Crestor) 20Mg, Tablet, Oral']);
  arrConcept.push(['310672', '2.16.840.1.113883.6.88', 'Haloperidol', 'Haloperidol (Haldol), 5 Mg, Tablet, Oral']);
  arrConcept.push(['261370', '2.16.840.1.113883.6.88', 'Rofecoxib', 'Rofecoxib (Vioxx), 50 Mg, Tablet, Oral']);
  arrConcept.push(['855346', '2.16.840.1.113883.6.88', 'Warfarin', 'Warfarin (Coumadin) 7.5Mg, Tablet, Oral']);
  arrConcept.push(['749196', '2.16.840.1.113883.6.88', 'Clopidogrel', 'Clopidogrel 300 MG Oral Tablet']);
  arrConcept.push(['308192', '2.16.840.1.113883.6.88', 'Amoxicillin', 'Amoxicillin 500 MG Oral Tablet']);
  arrConcept.push(['1100699', '2.16.840.1.113883.6.88', 'Linagliptin', 'Linagliptin (Tradjenta), 5 Mg, Tablet, Oral']);
  arrConcept.push(['208098', '2.16.840.1.113883.6.88', 'Tramadol', 'Tramadol Hcl (Ultram), 50mg, Tablet, Oral']);
  arrConcept.push(['706956', '2.16.840.1.113883.6.88', 'Tamsulosin', 'Tamsulosin Hcl (Flomax), 0.4Mg, Cap.Sr 24H, Oral']);
  arrConcept.push(['10535-3', '2.16.840.1.113883.6.1', 'Digoxin', 'Serum digoxin']);
  arrConcept.push(['9342-7', '2.16.840.1.113883.6.1', 'Total cholesterol', '']);
  arrConcept.push(['2823-3', '2.16.840.1.113883.6.1', 'Serum potassium', 'K']);
  arrConcept.push(['2951-2', '2.16.840.1.113883.6.1', 'Serum sodium', 'Na']);
  arrConcept.push(['1988-5', '2.16.840.1.113883.6.1', 'C Reactive Protein', '']);
  arrConcept.push(['4548-4', '2.16.840.1.113883.6.1', 'HbA1c', '']);

  arrConcept.push(['749198', '2.16.840.1.113883.6.88', 'Clopidogrel', 'Clopidogrel 300 MG Oral Tablet [Plavix]']);
  arrConcept.push(['243670', '2.16.840.1.113883.6.88', 'Aspirin', 'Aspirin 81mg oral tablet']);
  arrConcept.push(['757704', '2.16.840.1.113883.6.88', 'Simvastatin', 'Simvastatin 40mg oral tablet']);
  arrConcept.push(['120.9', '2.16.840.1.113883.6.90', 'Angina', '']);
  arrConcept.push(['57132-3', '2.16.840.1.113883.6.1', 'CYP2C19 Genotype test result', '']);

  var arrXslt = [];
  arrXslt.push(['1.3.6.1.4.1.3768', 'Infobutton_UI_VA']);
  arrXslt.push(['1.3.6.1.4.1.3768.97', 'Infobutton_UI_VA']);
  arrXslt.push(['1.3.6.1.4.1.3768.86', 'Infobutton_UI_VA']);
  arrXslt.push(['MBL', 'Infobutton_UI_VA']);
  arrXslt.push(['1.3.6.1.4.1.4275', 'Infobutton_UI_Duke']);
  arrXslt.push(['1.3.6.1.4.1.9328', 'Infobutton_UI_VA']);
  arrXslt.push(['1.3.6.1.4.1.150', 'Infobutton_UI_UW']);
  arrXslt.push(['1.3.6.1.4.1.5884', 'Infobutton_UI']);
  arrXslt.push(['AMIA', 'Infobutton_UI']);
  arrXslt.push(['1.3.6.1.4.1.88', 'Infobutton_UI_NYU']);
  arrXslt.push(['2.16.840.1.113883.3.1951', 'Infobutton_UI']);
  arrXslt.push(['http://lvhn.org', 'Infobutton_UI']);


  function getCs(code){
    for (i in arrConcept) {
      if (arrConcept[i][0] == code){
        return arrConcept[i][1];
      }
    }
  }

  function getDn(code){
    for (j in arrConcept) {
      if (arrConcept[j][0] == code){
        return arrConcept[j][2];
      }
    }
  }

  function getOt(code){
    for (j in arrConcept) {
      if (arrConcept[j][0] == code){
        return arrConcept[j][3];
      }
    }
  }

  function getXslt(orgOid){
    for (j in arrXslt) {
      if (arrXslt[j][0] == orgOid){
        return arrXslt[j][1];
      }
    }
  }


  function callIM(gender, age, task, mainSearchCriteriaC, labAbnormalFlag){
    var baseUrl = 'http://service.oib.utah.edu:8080/infobutton-service/infoRequest?';
    var organizationOID = document.getElementById("organizationId").value;
    var performer = document.getElementById("performerId").value;
    var organization = 'representedOrganization.id.root=' + organizationOID;

    var genderParam = '&patientPerson.administrativeGenderCode.c=' + gender + '' ;
    var ageParam = '&age.v.v=' + age + '&age.v.u=a';
    var taskParam = '&taskContext.c.c=' + task;
    var performerParam = '&performer=' + performer + '&informationRecipient=' + performer;

    var mainSearchCriteriaParam = '&mainSearchCriteria.v.c=' + mainSearchCriteriaC + '&mainSearchCriteria.v.cs=' + getCs(mainSearchCriteriaC) + '&mainSearchCriteria.v.dn=' + getDn(mainSearchCriteriaC);

    //var severityObservationParam;
    //if (labAbnormalFlag != null){
    //	severityObservationParam = '&interpretationCode.c.c=' + labAbnormalFlag;
    //}

    var xslt = '&xsltTransform=' + getXslt(organizationOID);
    //var url = baseUrl + organization + genderParam + ageParam + taskParam + mainSearchCriteriaParam + xslt;

    var url = baseUrl + organization + genderParam + ageParam + taskParam + mainSearchCriteriaParam + performerParam + xslt;
    var winRef = window.open(url, '', 'width=970, height=670, status=no, location=no, toolbar=no, scrollbars=no, resizable=yes');
    //document.getElementById('urlDisplay').value = url;
    return false;
  }
  </script>
</head>
<body>
  <div id="shadow">
    <div id="shadow2">
      <div id="header"></div>
      <div id="main">
        <h2>Electronic Health Record
          <select name="organizationId" id="organizationId">
            <option selected="selected" value="medicaldecisionmaking.org">medicaldecisionmaking.org</option>
            <option value="1.3.6.1.4.1.3768">Veterans Administration</option>
            <option value="1.3.6.1.4.1.3768.97">Salt Lake City VAMC</option>
            <option value="1.3.6.1.4.1.3768.86">Portland VAMC</option>
            <option value="1.3.6.1.4.1.4275">Duke University Health System</option>
            <option value="1.3.6.1.4.1.150">University of Washington</option>
            <option value="1.3.6.1.4.1.5884">University of Utah</option>
            <option value="1.3.6.1.4.1.88">NYU</option>
            <option value="2.16.840.1.113883.3.1951">Northwestern University</option>
            <option value="http://lvhn.org">Lehigh Valley Health Network</option>

          </select>
          Information audience
          <select name="performerId" id="performerId">
            <option selected="selected" value="PROV">Healthcare provider</option>
            <option value="PAT">Patient</option>
          </select>
        </h2>
        <table>
          <tbody><tr>
            <td class="label">Age</td><td><input id="age" value="47" size="2" name="age"></td>
          </tr>
          <tr>
            <td class="label">Gender</td><td><select id="gender" value="F" name="gender"><option selected="selected" value="F">F</option><option value="M">M</option></select></td>
          </tr>
          <tr>
            <td class="label">Problem list</td><td>
              <ul>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Heart Failure<a href="#" onclick="callIM(gender.value, age.value, 'PROBLISTREV', '84114007', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Post traumatic stress disorder<a href="#" onclick="callIM(gender.value, age.value, 'PROBLISTREV', '47505003', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Gastroesophageal reflux<a href="#" onclick="callIM(gender.value, age.value, 'PROBLISTREV', '235595009', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Diabetes mellitus type 2<a href="#" onclick="callIM(gender.value, age.value, 'PROBLISTREV', '44054006', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Migraine<a href="#" onclick="callIM(gender.value, age.value, 'PROBLISTREV', '37796009', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>Add problem<select name="problem" id="problem"><option selected="selected" value="237.7">Neurofibromatosis type 1</option><option value="446.6">Wegeners Granulomatosis</option><option value="595.9">Cystitis</option><option value="372.00">Acute Conjunctivitis</option></select><a href="#" onclick="callIM(gender.value, age.value, 'PROBLISTREV', problem.value, '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
              </ul>
            </td>
          </tr>
          <tr>
            <td class="label">Medications</td><td>
              <ul>
                <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Rosuvastatin (Crestor), 20 Mg, Tablet, Oral<a href="#" onclick="callIM(gender.value, age.value, 'MLREV', '301542', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>

                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Linagliptin (Tradjenta), 5 Mg, Tablet, Oral<a href="#" onclick="callIM(gender.value, age.value, 'MLREV', '1100699', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Warfarin (Coumadin) 7.5Mg, Tablet, Oral<a href="#" onclick="callIM(gender.value, age.value, 'MLREV', '855346', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Clopidogrel 300 MG Oral Tablet<a href="#" onclick="callIM(gender.value, age.value, 'MLREV', '749196', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial"></font> Amoxicillin 500 MG Oral Tablet<a href="#" onclick="callIM(gender.value, age.value, 'MLREV', '308192', '');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>

              </ul>
            </td>
          </tr>
          <tr>
            <td class="label">Lab results</td><td>
              <ul>
                <li>
                  Serum digoxin 1.5 mg/dl <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial">N</font>
                  <a href="#" onclick="callIM(gender.value, age.value, 'LABRREV', '10535-3', 'N');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  Total cholesterol 300 mg/dl<font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial">H</font> <a href="#" onclick="callIM(gender.value, age.value, 'LABRREV', '9342-7', 'H');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                </li>
                <li>
                  K 2.8 mEq/l <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial">L</font> <a href="#" onclick="callIM(gender.value, age.value, 'LABRREV', '2823-3', 'L');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a></li>
                  <li>
                    Na 127 mEq/l <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial">L</font> <a href="#" onclick="callIM(gender.value, age.value, 'LABRREV', '2951-2', 'L');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a></li>
                    <li>
                      C Reactive Protein 555 ug/dl <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial">H</font> <a href="#" onclick="callIM(gender.value, age.value, 'LABRREV', '1988-5', 'H');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                    </li>
                    <li>
                      HbA1c 8.2% <font style="font-color:red;font-weight:bold;font-size:12pt;font-family:arial">H</font> <a href="#" onclick="callIM(gender.value, age.value, 'LABRREV', '4548-4', 'H');"> <img title="OpenInfobutton" src="images/infobutton_icon.png"> </a>
                    </li>
                  </ul>
                </td>
              </tr>
            </tbody></table>
          </div>
        </div>
      </div>


    </body></html>
